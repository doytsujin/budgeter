(function() {
  document.querySelector("[data-container-for='modal'] .modal").classList.remove("is-active")

  let newCategory = document.createElement("table")
  newCategory.dataset["categoryId"] = "<%= @category.id %>"
  newCategory.dataset["controller"] = "accordion"
  newCategory.classList.add("table", "is-hoverable", "is-fullwidth", "m-b-lg")

  let referenceNode = document.querySelector("table[data-category-id]:last-child") ||
    document.querySelector("h1.title")

  referenceNode.parentNode.insertBefore(newCategory, referenceNode.nextSibling)

  newCategory.innerHTML = "<%= j render @category, collapsed: false %>"
})()


<%= render 'application/flash_messages', format: :js %>
